# 







#  1 、存储系统体系结构

速度由快到慢

Cache---> 主存储器---> 磁盘--->磁带

# 2、高速缓冲存储器Cache

## Cache命中率

如果访问的数据在Cache中，称为访问Cache命中

若命中率为h，N~c~为访问Cache的命中次数，N~m~为访问主存的总次数，则命中率

$$ h=\dfrac{N~c~}{N~c~+N~m~} $$

t~c~为命中时的Cache访问时间，t~m~为未命中是的主存访问时间，1-h表示未命中率，则平均访问时间t~a~为

$$ t_{a}=ht_{c}+(1-h)t_{m} $$

用e表示访问效率，则

$$ e=\dfrac{t_{c}}{t{a}}*100\% = \dfrac{t_{c}}{ht_{c}+(1-h)t_{m}}*100\% $$

## Cache的分类

* 共享单一cache：指令和数据共享同一个cache

* 独立的指令和数据cache

指令cache只让读

数据cache可读可写

## Cache映像方式

### 相关概念

字块是主存与cache交换的最小单位

字是CPU访问存储器时可存取的最小单位

### 映像方式

1. 全相连映像方式

   允许主存中的每个字块映像到cache的任何一个字块位置上

2. 直接映像方式

   主存中的多个字块只允许映像到cache的某个字块位置上

3. 组相连映像方式

   折中方案

### 相关计算

1. cache的字块地址，由需要多少块决定，比如需要512块，则字块地址为9位。

2. 字块内地址，由块长决定，块长为4，则字块内地址为2位

3. 直接映射，设计主存地址格式

   主存字地址为$a$，设字块地址为$c$，字块内地址为$b$，则主存字块标记为$a-b-c$

主存字块标记|Cache字块地址|字块内地址
:-:|:-:|:-:
a-b-c|c|b

4. 全相联映射，设计主存格式

   主存地址位数去掉字块内地址位数即为主存字块标记

主存字块标记|字块内地址
:-:|:-:
a-b|b

5. 组相连映射

   n路组相连，表示每组包含n个字块

   组数为cache容量/块长/n

主存字块标记|组地址|字块内地址
:-:|:-:|:-:
a-b-c-log~2~n|c-log~2~n|b

# 3、辅助存储器

## 分类

* 磁表面存储器
* 光存储器
* 半导体存储器

## 概述

* 存储密度：单位长度或单位面积存储的二进制信息量
* 存储容量：存储的二进制信息的总量
* 寻址时间：磁头从启动到找到存储位置的时间，分为找道时间和等待时间
* 数据传输率：单位时间传送数据的位数 磁道容量*转速
* 道密度：半径方向的单位长度磁道数
* 位密度：磁道方向单位长度记录的二进制位数

## 存储容量

非格式化容量

格式化容量

## 寻址时间

* 找道时间：磁头从当前磁道移动到目标磁道的时间
* 等待时间：磁头等待读写区域旋转到磁头正下方所需要的时间。
* 平均等待时间：磁盘旋转半圈的时间

## 磁记录方式

* 归零制(RZ)：1为正，0为负，每写入一个信息，电流归零
* 不归零制(NRZ)：1正0负，无需每次归零
* 见一就翻(NRZ1)：写1时，改变电流方向，写0时，不变
* 调相制(PM)：写1时，由正变负，写入连续的0或1时，也要在交界的地方翻转
* 调频制(FM)：1在中间改变方向，0不改变，交界处必定改变
* 改进的调频制(MFM)：1在中间变，0不变，若连续写入多个0，在两个0的位周期交界处翻转

自同步能力|无自同步能力
-|-
RZ、PM、FM、MFM|NRZ、NRZ1



